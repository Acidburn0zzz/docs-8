## Unity Game Engine

### Downloads
Open source, clone https://github.com/ouya/ouya-unity-plugin directly from public GIT.

### Forums

@OUYA - (Unity on OUYA Forums) - http://forums.ouya.tv/categories/unity-on-ouya<br/>

### Developer Support Hangouts

2013:
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=2pHtay8fF-w" target="_blank">Feb 11</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=cgZ8dbHgi00" target="_blank">Feb 18</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=qGeUaxXCrAs" target="_blank">Mar 4A</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=hE4FbM3Gpp8" target="_blank">Mar 4B</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=4VdF5NelOWk" target="_blank">Mar 4C</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=DEeu6L7UFSY" target="_blank">Mar 11</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=Mp0qiOfyQt0" target="_blank">Mar 18</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=yz0OR6Sqyhc" target="_blank">Mar 25</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=rUF7c0OrA_Q" target="_blank">Mar 27</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=q8mY40VWBxo" target="_blank">Apr 1</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=Ctw44DXqnzc" target="_blank">Apr 8</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=vfb66JxdzKk" target="_blank">Apr 15</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=bA39KnsG-kA" target="_blank">Apr 22</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=Y9tRNVSEEbo" target="_blank">Apr 29</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=SugaCc5OpoQ" target="_blank">May 6</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=85vkB2rGGhU" target="_blank">May 13</a>]&nbsp;
[<a href="http://www.youtube.com/watch?feature=player_embedded&v=c86lI_BnuHA" target="_blank">May 23</a>]

## Guide

### Learn Unity

If you are new to Unity, this crash course should bring you up to speed on the Unity interface while you make a PhotoShop clone from scratch.

<table border=1>

<tr>

 <td>Paint Series 001 - 00 Introduction (1:27)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=uQ6redu1B3Q" target="_blank">
<img src="http://img.youtube.com/vi/uQ6redu1B3Q/0.jpg" alt="Paint Series 001 - 00 Introduction" width="240" height="180" border="10" /></a>
 </td>
 
  <td>Paint Series 001 - 01 Asset (6:27)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=fXPTSJS0i30" target="_blank">
<img src="http://img.youtube.com/vi/fXPTSJS0i30/0.jpg" alt="Paint Series 001 - 01 Asset" width="240" height="180" border="10" /></a>
 </td>
 
</tr>
 
<tr>
  
 <td>Paint Series 001 - 02 Project (12:06)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=Oxq7k_l76_o" target="_blank">
<img src="http://img.youtube.com/vi/Oxq7k_l76_o/0.jpg" alt="Paint Series 001 - 02 Project" width="240" height="180" border="10" /></a>
 </td>
 
 <td>Paint Series 001 - 03 Camera (0:59)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=E6BNJLPP-xE" target="_blank">
<img src="http://img.youtube.com/vi/E6BNJLPP-xE/0.jpg" alt="Paint Series 001 - 00 Introduction" width="240" height="180" border="10" /></a>
 </td>
 
</tr>
 
<tr>
  
 <td>Paint Series 001 - 04 Canvas (3:45)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=d8hYx0Q4k5o" target="_blank">
<img src="http://img.youtube.com/vi/d8hYx0Q4k5o/0.jpg" alt="Paint Series 001 - 04 Canvas" width="240" height="180" border="10" /></a>
 </td>
 
 <td>Paint Series 001 - 05 Material (0:59)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=QRX5XanQjd4" target="_blank">
<img src="http://img.youtube.com/vi/QRX5XanQjd4/0.jpg" alt="Paint Series 001 - 05 Material" width="240" height="180" border="10" /></a>
 </td>
 
</tr>
 
<tr>
   
  <td>Paint Series 001 - 06 Scripting (10:21)<br/>
 <a href="http://www.youtube.com/watch?feature=player_embedded&v=ZPhP7KYi5lk" target="_blank">
 <img src="http://img.youtube.com/vi/ZPhP7KYi5lk/0.jpg" alt="Paint Series 001 - 06 Scripting" width="240" height="180" border="10" /></a>
  </td>
  
  <td>Paint Series 001 - 07 Input (12:12)<br/>
 <a href="http://www.youtube.com/watch?feature=player_embedded&v=5rysqDc1rIY" target="_blank">
 <img src="http://img.youtube.com/vi/5rysqDc1rIY/0.jpg" alt="Paint Series 001 - 07 Input" width="240" height="180" border="10" /></a>
  </td>
  
 </tr>
 
 <tr>
   
  <td>Paint Series 001 - 08 Resolution (16:39)<br/>
 <a href="http://www.youtube.com/watch?feature=player_embedded&v=W8dg1G6-t8I" target="_blank">
 <img src="http://img.youtube.com/vi/W8dg1G6-t8I/0.jpg" alt="Paint Series 001 - 08 Resolution" width="240" height="180" border="10" /></a>
  </td>
  
  <td>Paint Series 001 - 09 Conclusion (0:25)<br/>
 <a href="http://www.youtube.com/watch?feature=player_embedded&v=BydzD6MaSEU" target="_blank">
 <img src="http://img.youtube.com/vi/BydzD6MaSEU/0.jpg" alt="Paint Series 001 - 09 Conclusion" width="240" height="180" border="10" /></a>
  </td>
  
 </tr>
 
</table>

### ouya-unity-plugin Examples

Several examples are included in the ouya-unity-plugin package.

<table border=1>

 <tr>

 <td>Get the latest from GitHUB (3:59)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=plqEuuilv6k" target="_blank">
<img src="http://img.youtube.com/vi/plqEuuilv6k/0.jpg" alt="Get the latest from GitHUB" width="240" height="180" border="10" /></a>
 </td>
 
  <td>Intro to OUYA Unity Package (11:48)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=c5c9tEqpHsw" target="_blank">
<img src="http://img.youtube.com/vi/c5c9tEqpHsw/0.jpg" alt="Intro to OUYA Unity Package" width="240" height="180" border="10" /></a>
 </td>
 
 </tr>
 
 <tr>

 <td>OUYA Unity SDK - Intro on dependencies (2:41)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=b-SiqzVhdFM" target="_blank">
<img src="http://img.youtube.com/vi/b-SiqzVhdFM/0.jpg" alt="OUYA Unity SDK - Intro on dependencies" width="240" height="180" border="10" /></a>
 </td>
 
  <td>Key Store Setup (1:27)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=IVk7Cic2lpg" target="_blank">
<img src="http://img.youtube.com/vi/IVk7Cic2lpg/0.jpg" alt="Key Store Setup" width="240" height="180" border="10" /></a>
 </td>
 
 </tr>
 
  <tr>

 <td>Subscribe to Menu Button and Menu Appearing (5:18)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=4ghKgKZqSG0" target="_blank">
<img src="http://img.youtube.com/vi/4ghKgKZqSG0/0.jpg" alt="Subscribe to Menu Button and Menu Appearing" width="240" height="180" border="10" /></a>
 </td>
 
  <td>In-App-Purchase Setup - ShowProducts Example (11:46)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=lJjGH_KIE7o" target="_blank">
<img src="http://img.youtube.com/vi/lJjGH_KIE7o/0.jpg" alt="In-App-Purchase Setup - ShowProducts Example" width="240" height="180" border="10" /></a>
 </td>
 
 </tr>
 
  <tr>

 <td>Example ShowUnityInput (21:59)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=YqsumqX4REU" target="_blank">
<img src="http://img.youtube.com/vi/YqsumqX4REU/0.jpg" alt="Example ShowUnityInput" width="240" height="180" border="10" /></a>
 </td>
 
  <td></td>
 
 </tr>

 <tr>

 <td>Show Guitar (1:06)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=RNF34XIDwGY" target="_blank">
<img src="http://img.youtube.com/vi/RNF34XIDwGY/0.jpg" alt="Show Guitar" width="240" height="180" border="10" /></a>
 </td>
 
  <td>Show Drumkit (0:35)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=L4pO73cK22Y" target="_blank">
<img src="http://img.youtube.com/vi/L4pO73cK22Y/0.jpg" alt="Show Drumkit" width="240" height="180" border="10" /></a>
 </td>
 
 </tr>
 
  <tr>

 <td>Blending Animations with Mechanim (18:52)<br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&v=iIbSE8DCYNE" target="_blank">
<img src="http://img.youtube.com/vi/iIbSE8DCYNE/0.jpg" alt="Blending Animations with Mechanim" width="240" height="180" border="10" /></a>
 </td>
 
  <td></td>
 
 </tr>

</table>

Starter Kit - A multiple scene project example, which has an initial setup scene, a splash scene, along with a main menu scene, and a game scene. The sample setup is everything you need to start developing a project for the OUYA.<br/>
Ground Raycast - A simple example of raycasting to a ground plane using the camera projection.<br/>
Set Resolution - Change the resolution, not only with the Unity API, but pass the call to Java to update the view dimensions.<br/>
Mesh Performance - Compare frames per second speed when manipulating polygon count and overdraw.<br/>
NDK - Native code can often run faster and then example shows example interfaces to have C# call into a C native plugin.<br/>
Products - In-app-purchase example for getting products, requesting purchases, and getting receipts.<br/>
Sounds - Play various imported sounds<br/>
Sticks - A tool to plot a graph of the left and right stick for all the connected bluetooth controllers.<br/>
Unity Input - The newest input example which runs with less latency and uses the Unity Input API.<br/>
Camera - Access supported-connected webcams<br/>

###Recommended Tools
MonoDevelop - The default code editor<br/>
Eclipse - Useful to get intellisense when editing Java files<br/>
Intellij - An alternative Java editor<br/>
UnIDE - Unity extension allows in-editor script editing<br/>
Visual Studio - Best editor for C#<br/>
Resharper - Visual Studio extension for faster script editing and code refactoring<br/>
Android SDK - Make sure you upgrade “Android SDK Tools” only to Rev 21 of the Android Tools per - <a target=_blank href="http://forum.unity3d.com/threads/176737-unknown-error-when-building-simple-scene/page2">[this post]</a>.<br/>

## Live Unity Training Videos

Live Training Archive - http://unity3d.com/learn/tutorials/modules/beginner/live-training-archive/editor-basics

## Quick Guide

```
Documentation - https://devs.ouya.tv/developers/docs/unity

Download the source to a new folder - https://github.com/ouya/ouya-unity-plugin

Open that folder as a Unity project.

Use the OUYA->Export Core to export the core package for your game.

Backup your game project.

Open your game project and import core.

Log into the developer portal and create a game.

https://devs.ouya.tv/developers/games

Assign a bundle id: com.yourcompany.title

Download the signing key and save into Assets\Plugins\Android\res\raw\key.der

In Unity open the OUYA Panel (Window->Open OUYA Panel)

Switch to the Java Panel and point to your JDK. It must be JDK6 1.6 32-bit. (Yes 32-bit.)

On Mac, install XCode and the development tools to get Java.

If nothing is grayed out switch to the Android tab.

Make sure Android rev 21 is installed. You'll find a link in the setup docs.

https://devs.ouya.tv/developers/docs/setup

Run the Android SDK, and make sure the platform-tools are installed (don't upgrade to Rev 22)

Install the Platform-16 SDK.

Install the Extras/Android Support Libary.

Install the Google USB drivers.

Install and exit Android SDK.

You may need to re-add the (Home folder) ~/.android/adb_usb,ini 0x2836.

Make sure adb is in your path. (android-sdk/tools and android-sdk/platform-tools)

You should see your OUYA in adb devices with:

adb devices

Sometimes kill adb and rerun the above step to see devices.

adb kill-server

If nothing is grayed out in the OUYA Panel Android tab, switch to the OUYA tab.

If you are on Unity 4.X change the Java App Class to: OuyaNativeActivity

Enter your bundle id to match the developer portal.

Hit the sync button and the bundle id will be made to match.

In your initial scene add the OuyaGameObject prefab.

If you have multiple scenes, make sure in the inital launch scene that Application.LoadLevel is in Start()

so the Controller Awake() method has a chance to run.

Be sure to also enter your developer UUID from the developer portal in the inspector on the OuyaGameObject

in your initial scene.

https://devs.ouya.tv/developers

Review the Unity docs for setting up controller input.

For button input the examples use:

OuyaExampleCommon.GetButton (GetButton, GetButtonDown, GetButtonUp are available)

For axis input the examples use:

OuyaExampleCommon.GetAxis (GetAxis, GetAxisRaw are available)

Review the Unity docs for setting up in-app-purchases

Edit your build settings. File->Build Settings.

Set the platform to Android.

Click Player Settings.

Click the Android tab.

Under resolution Default Orientation should be Landscape Left.

Under other settings your bundle id should be set.

Under other settings set the Minimum API Level to 16.

On the OUYA Panel click the Compile Plugin button.

On the OUYA Panel click the Compile Java button.

If you have the free version of Unity, use the menu File->Build and Run.

If you have the Pro version, just hit Build and Run on the panel.
```

## Quick Update

```

Be sure to git updates from github checkout or update the clean checkout folder.

Use the OUYA->Export Core to export the core package for your game.

Backup your game project.

Open your game project and import core.

When you import careful not to replace your signing key or custom icons.

Again you may need to resync to make the bundle id and package match.

Recompile the plugin.

Recompile the Java application.

Build and Run.

Always back your keystore.

The keystore is used by the auto updater.

If you lose your keystore, users have to manually uninstall to update.

```

### Core Package

<pre>

ProjectSettings\InputManager.asset - Axis setup for all joysticks
+---LitJson - JSON Encoding/Decoding Library
|       COPYING - License
|       IJsonWrapper.cs - Library implementation
|       JsonData.cs - Library implementation
|       JsonException.cs - Library implementation
|       JsonMapper.cs - Library implementation
|       JsonReader.cs - Library implementation
|       JsonWriter.cs - Library implementation
|       Lexer.cs - Library implementation
|       license.txt - License
|       ParserToken.cs - Library implementation
|
+---Ouya
|   \---SDK
|       +---Editor
|       |       OuyaMenuAdmin.cs - Provides menu item to export Core package
|       |       OuyaPanel.cs - The interactive OUYA Panel
|       |       OuyaPostProcessor.cs - Optional post processor for compiling Java
|       |
|       +---Prefabs
|       |       OuyaGameObject.prefab - Prefab with the OuyaGameObject
|       |
|       \---Scripts
|               OuyaGameObject.cs - Handles communication from Java to C#
|
\---Plugins
    |   IOuyaController.cs - Interface for supported controllers (WIP)
    |   OuyaController.cs - Mappings for supported controller (WIP)
    |   OuyaControllerCommon.cs - Common mapping logic (WIP)
    |   OuyaExampleCommon.cs - Common mappings for all controllers (recommended)
    |   OuyaKeyCodes.cs - Enum mappings for Unity API Keycodes
    |   OuyaSDK.cs - Logic for in-app-purchases
    |   PS2Controller.cs - Mappings for supported controller (WIP)
    |   XBox360Controller.cs - Mappings for supported controller (WIP)
    |
    \---Android
        |   AndroidManifest.xml - Defines the Android project and starting activity
        |   OuyaUnityApplication.jar - Compiled Java Application library
        |   OuyaUnityPlugin.jar - Java Compiled Plugin library
        |
        +---jni - C++ on Android
        |       Android.mk - Make file for compiling C++
        |       jni.cpp - JNI C++ implementation
        |
        +---libs
        |   |   gson-2.2.2.jar - Java JSON encoding
        |   |   guava-r09.jar - Google core library
        |   |   ouya-sdk.jar - The ODK
        |   |
        |   \---armeabi
        |           lib-ouya-ndk.so - Compiled C++ library
        |
        +---res
        |   +---drawable
        |   |       app_icon.png - Example icon
        |   |
        |   +---drawable-xhdpi
        |   |       ouya_icon.png - Example icon
        |   |
        |   +---layout
        |   |       main.xml - Android layout
        |   |
        |   +---raw
        |   |       key.der - signing key
        |   |
        |   \---values
        |           strings.xml - resource strings
        |
        \---src
                IOuyaActivity.java - Common static references
                OuyaNativeActivity.java - Start activity for Unity 4.X
                OuyaUnityApplication.java - Start activity for Unity 3.X
                OuyaUnityPlugin.java - Plugin interface for invoking Java from C#
                UnityOuyaFacade.java - In-app-purchase wrapper
                
</pre>

## Full Document

### Authors
Tim Graupmann (tim@tagenigma.com)

### Audience
The ouya-unity-plugin is targeted towards Unity developers intending to publish to the OUYA platform.

### Supported Platforms
The OUYA SDK Unity Package supports publishing from Mac and Windows.

### Introduction
Welcome to the OUYA Unity developers club. This document will provide an overview for setting up the example Unity application to publish on the OUYA platform.

### Forums
The forums are a great place for support and to get answers for common questions. There are several stickied posts in the [Unity section](http://forums.ouya.tv/categories/unity-on-ouya). Be sure to watch out for updates to the SDK in the [minor updates thread](http://forums.ouya.tv/discussion/197/sticky-ouya-unity-sdk-minor-updates#latest). There are [40 training videos](http://forums.ouya.tv/discussion/200/sticky-ouya-unity-package-videos/p1) and growing. There are also [weekly hangouts](http://forums.ouya.tv/discussion/710/g-hangout-scheduling) to field support questions.

### Packaging
Open the checkout directory as the Unity base folder. From the Unity IDE menu use the OUYA menu to export the Core, Examples, and StarterKit individual packages. This makes it easier to update GIT and then bring in the Core changes directly into your game. The export package should open explorer/finder in the base folder where you'll find the exported package. And then import the desired package into your project.

![Import Package](https://d31pno3ktcq63f.cloudfront.net/assets/unity/01_ImportPackage.jpg)

You can also import packages to the focused Unity window with a double-click on the unitypackage file.

### Imported Files
You will find the following structure imported into your Assets folder.
```text
./LitJson – 3rd party JSON parsing library
./Ouya/Examples/Scenes/SceneShowProducts.unity – Example Products Scene
./Ouya/Examples/Scenes/SceneShowController.unity – Example Controller Scene
./Ouya/Examples/Scenes/SceneShowNDK.unity – Example NDK Scene
./Ouya/Examples/Scripts/OuyaInputManager.cs – Example script interacting with OUYA input
./Ouya/Examples/Scripts/OuyaShowController.cs – Script for showing controller states
./Ouya/Examples/Scripts/OuyaShowProducts.cs – Script for showing products
./Ouya/Examples/Scripts/OuyaShowNDK.cs – Script for showing C++ interaction
./Ouya/SDK/Editor/OuyaPanel.cs – Custom editor extension for OUYA
./Ouya/SDK/Prefabs/OuyaGameObject.prefab – OUYA SDK setup prefab
./Ouya/SDK/Scripts/OuyaGameObject.cs – OUYA SDK java interface
./Plugins/OuyaExampleCommon.cs – Common methods for examples like input
./Plugins/OuyaKeyCodes.cs – Enums for the key codes
./Plugins/OuyaSDK.cs – OUYA SDK Unity API
./Plugins/Android – Special folder for customizing Android platform publishing
./Plugins/Android/AndroidManifest.xml – Custom manifest, overrides the default
./Plugins/Android/libs – Jar libraries
./Plugins/Android/libs/gson-2.2.2.jar – GSON jar for parsing JSON in Java
./Plugins/Android/libs/guava-r09.jar – Google jar for Google API
./Plugins/Android/libs/ouya-sdk.jar – OUYA SDK jar for Java API
./Plugins/Android/OuyaUnityApplication.jar – Example application Jar
./Plugins/Android/OuyaUnityPlugin.jar – OUYA SDK interface Jar
./Plugins/Android/jni/Android.mk – Make file for building JNI
./Plugins/Android/jni/jni.cpp – C++ JNI interface
./Plugins/Android/res/drawable/app_icon.png – Custom application icon
./Plugins/Android/res/drawable-xhdpi/ouya_icon.png – Custom icon for the store
./Plugins/Android/res/raw/key.der – Signing key from the developer portal
./Plugins/Android/res/layout/main.xml – Custom android layout
./Plugins/Android/res/values/strings.xml – Custom android strings
./Plugins/Android/src/OuyaUnityApplication.java – Example Android Application Activity

// Auto generated, this location will vary depending on your bundle identifier
./Plugins/Android/src/tv/ouya/demo/OuyaUnityApplication/R.java
```

### References
- [Litjson](http://litjson.sourceforge.net): third party JSON parsing library for parsing in C#.
- [Google-GSON](http://code.google.com/p/google-gson/): third party JSON parsing library for Java.
- [Google-Guava](http://code.google.com/p/guava-libraries/): third party library for Google core.

### Example Scenes
Note: Although some of the example scenes have OuyaGameObject, the preferred way is to put OuyaGameObject into an init scene; see the starter kit for details.

#### Scene ShowProducts

Open the ./Ouya/Examples/Scenes/SceneShowProducts.unity example scene.

![Products Scene](https://d31pno3ktcq63f.cloudfront.net/assets/unity/04_ProductsScene.jpg)

All scenes start with a Main Camera. There’s a custom GameObject added for OuyaGameObject which handles taking messages from the OUYA SDK from Java to C#. The “ShowProduct” GameObject is a simple display script for displaying retrieved products and invoking purchases. Since this example is a single scene that’s why it has the OuyaGameObject. Otherwise it would use the init scene setup.

#### Scene ShowUnityInput

Open the ./Ouya/Examples/Scenes/SceneShowUnityInput.unity example scene.

This example uses the Unity API Input to access input. The "Core" package also includes "ProjectSettings/InputManager.asset" which has 122 axises already defined. OuyaExampleCommon.cs has example mappings to handle the OUYA controller mappings along with other controllers.

### Android Setup
Some player settings must be customized to build on Android. Open the player settings by navigating the menu to the Edit->Project Settings->Player menu item. The PlayerSettings will appear in the inspector.

![Player Settings](https://d31pno3ktcq63f.cloudfront.net/assets/unity/05_PlayerSettings.jpg)

In the inspector, expand the Resolution and Presentation section. Be sure to set your product and company name. The OUYA will use a default orientation for landscape. Choose landscape left from the drop down. Unity calls drop downs, pop ups (intuitively opposite).

![Android Presentation](https://d31pno3ktcq63f.cloudfront.net/assets/unity/07_AndroidPresentation.jpg)

Before any Android application can build you must set the bundle identifier. Be careful that the Bundle Identifier matches what you’ve used in the Android manifest. Also set the Minimum API Level to 16 or better. The OUYA console will be version 16, and the SDK used Android API 16 calls in the application Java for detecting controller connect/disconnect events. The screenshots may show 14 but you want to use 16.

![Android Other Settings](https://d31pno3ktcq63f.cloudfront.net/assets/unity/06_AndroidOtherSettings.jpg)

### Build Settings
Make sure you change the target platform to Android. Select Android and then click the button “Switch Platform”. Add a default scene by clicking the “Add Current”. Make sure at least one scene is checked. At this point you can build and enter the file path for the Android APK build.  
  
Using the build settings, if you have more than one scene just by marking the toggles, you can switch between the loading scenes. You can use Unity script for switching between scenes.

![Build Settings](https://d31pno3ktcq63f.cloudfront.net/assets/unity/11_BuildSettings.jpg)

![Build Settings](https://d31pno3ktcq63f.cloudfront.net/assets/unity/12_BuildSettings.jpg)

### OUYA Panel
Immediately after importing the OUYA SDK Unity Package, the OUYA Panel becomes available in the Menu. Use Window->Open Ouya Panel to open the OUYA Panel. The OUYA Panel will open which can be docked. The top of the panel has a unique identifier (MachineName_ProcessPID) to help identify the Unity process which is useful for debugging or task killing.

![OUYA Panel](https://d31pno3ktcq63f.cloudfront.net/assets/unity/02_OuyaMenu.jpg)

The OUYA panel has several tabs to show information for functional areas: “OUYA”, “Unity”, “Java JDK”, “Android SDK”, and “Android NDK”. Run through each tab to check for missing paths. Any missing path or file with grey out. You may need to browse to find JDK or SDK paths. There should be no greyed out tabs in order for the compile, build, and run automation to work.

### OUYA Tab
The OUYA tab has a button section and then an info section below. The button “Build Application” will compile the Java Application and immediately build the Application APK for Android. The button “Build and Run Application” compiles the Java Application, builds the APK, and executes the APK on a connected device. The button “Compile” will compile the Java Application. The different compile buttons are available for your convenience which are helpful during customization. The post processor is off by default and will detect any Java/C++ change which will trigger a recompile. The “Sync Bundle ID” button will sync your Android manifest and Java Application package identifiers. The bundle identifier should be unique for every game. The APK name will change the name of the build output file. If you choose your Java Application name, you can specify an alternate name which is intended for hardcore tinkerers. The bundle prefix is just for debugging and is the first part of your bundle identifier. The App Java Pack is the package referenced by your Java Application. If the bundle identifier is mismatched and error will display here, in which case just click the sync button. The manifest pack refers to the bundle identifier specified in the Android manifest, and the sync button will fix a mismatch.

![OUYA Tab](https://d31pno3ktcq63f.cloudfront.net/assets/unity/03_OuyaTab.jpg)

The information section has several meta references for quick navigation into the project. If any dependency, path, or file is missing it will be greyed out in the information panel. The bundle identifier that was set in player settings can be changed here. The bundle prefix is used when packaging the application jar and is based on the bundle identifier. The GameObject is a meta reference and clicking the object field will highlight that item in the scene view. New OUYA projects will need the OUYA GameObject added to the scene to accept communication from Java. There is an OUYA GameObject prefab in the project which can be dragged to the scene for easy setup. The OUYA SDK object field when clicked will navigate and highlight the Jar library. The same is true for both Guave and GSON jar libraries. The AndroidManifest is a custom manifest which is used in the Android build process. Make sure that the manifest matches the BundleIdentifier, if not your application will exit on start without detecting the main activity. R.java is autogenerated by the Android SDK when the compile button is pressed. The R.java uses the main layout for automatic generation. The Application.Java references the example OuyaUnityApplication.java which is an Activity which passes input to the OuyaPlugin.jar which can be subscribed to like in the example controller script. “Res” and “Src” folders are custom folders that can be customized during the APK building process. The custom icon is located in the “Res” folder. The Application java file is in the “Src” folder.

### Unity Tab
The Unity Tab has useful path information. The Unity JAR “classes.jar” contains the library necessary for Java to instantiate the Unity Web Player and communicate with the Unity Web Player. The path is detected from Unity and depends on where the editor was installed. The Unity project folder is the base folder for the current project. The OUYA SDK Unity Package should support Unity 3.5.0 or greater.

![Unity Tab](https://d31pno3ktcq63f.cloudfront.net/assets/unity/08_UnityTab.jpg)

### Java JDK Tab
The Java JDK Tab lets the user specify their path to the Java JDK on Windows. On Mac, the JDK is part of the OS install. Some background, make sure you use a 32-bit install of the Java JDK. You’ll want to use 1.6 as your Java target for optimal compatibility. Only more recent Unity versions support JDK 1.7. The path information below shows the path to the “tools.jar” on Windows. On the Mac the tools jar is “classes.jar”. On Windows the path links to file executables for Jar packaging, Java compiler, and the Java disassembler for generating signatures. On Mac, the path links to file applications, similar to Windows. The button “Select SDK Path..” will open a folder browse dialog to find the JDK path. “Reset paths” will set to a Default. Any missing path will be grayed out.

![Java JDK Tab](https://d31pno3ktcq63f.cloudfront.net/assets/unity/09_JavaJDKTab.jpg)

### Android Tab
The Android Tab has info to point to the Android SDK download location. Windows has an installer for a more standard location; where Mac has an arbitrary unpacked zip. The info pane shows the Android min SDK version from the player settings. Android JAR is used in the classpath when compiling the Application jar. ADB path is the application file path for the ADB platform tool in the Android SDK. ADB is useful to get the list of connected devices, install, and launch APK on devices. APT is yet another Android SDK useful tool. And the SDK path is the path to the Android SDK. The “Select SDK Path…” button will open a folder browse dialog to find the Android SDK base folder. Reset path will use the default. Any missing links will grey out.

![Android Tab](https://d31pno3ktcq63f.cloudfront.net/assets/unity/10_AndroidTab.jpg)

### NDK Tab
The NDK Tab shows info for the Android NDK. Windows and Mac are just an archive, so you’ll need to point the tab to where you unpack. NDK allows compiling the C++ NDK example which potentially can also wrap JNI. You can wrap the JNI from both C++ and C# to pick the best approach for your application. The JNI.cpp example has an easy reference from within the Android plugins folder. On Windows and Mac, there is a patch that needs to be applied to NDK in order to fix a compile issue which is explained here: https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/b4DSxE1NAS0 on Google groups. The NDK can be downloaded from http://developer.android.com/tools/sdk/ndk/index.html the android site.

![NDK Tab](https://d31pno3ktcq63f.cloudfront.net/assets/unity/14_NDKTab.jpg)

### Scene Setup
Since the initial writing of this document, controller input for games has been optimized. When examples are a single scene, they each include a single instance of the OuyaGameObject prefab. In other cases where multiple scenes are being used, you want to go with an init scene approach. Your game will usually want an initial scene, splash screen, a menu scene, and a game scene. The initial scene will contain an OuyaGameObject and is the only scene that will contain it. The initial scene will have a script that immediately loads your menu scene. And from your menu scene and game scene they will not contain a duplication OuyaGameObject. Everything other than the initial scene can load new scenes and switch between them freely. In your initial game scene, this is not the place where you enter your developer id that you’ll find on the OUYA developer portal. The OuyaGameObject also has other parameters for turning on debugging and raw debug logging. Debugging is useful for setting up an unrecognized controller.

### Starter Kit
The SDK now includes a starter kit to jump start users into a proper scene and project setup. The starter kit has 4 scenes, SceneInit, SceneSplash, SceneMain, and SceneGame. Be sure to add all 4 scenes to the build settings when using the starter kit.  
  
The starter kit begins with SceneInit which has the only OuyaGameObject instance. The OuyaGameObject has don’t destroy on load and should only be placed into the init scene. You should never have duplicate OuyaGameObjects in your scene. The OuyaSceneInit script powers the SceneInit scene. SceneInit immediately loads the next scene which transitions to the SceneSplash
